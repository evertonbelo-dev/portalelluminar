<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarô Divino Siriano - A Jornada</title>    
    <link rel="stylesheet" href="css/portal.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <style>
        /* Estilos rápidos para o estado de carregamento e áreas de resultado */
        .oculto { display: none; }
        .carregando { color: #d4af37; font-style: italic; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        .resultado-texto { background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 8px; border-left: 3px solid #d4af37; margin-top: 15px; }
        .carta-box { display: inline-block; padding: 10px; margin: 5px; border: 1px solid #d4af37; border-radius: 5px; background: #1a1a1a; color: #fff; }
    </style>
</head>
<body>

    <a href="index.html" class="link-voltar-home">← Voltar ao Portal</a>

    <section id="tela-conexao" class="tela ativa">
        <div class="conteudo-central">
            <div class="simbolo-portal">
                <img src="assets/PortalElluminar/Simbolo_Portal.png" alt="Símbolo" style="width: 80px;">
            </div>
            <h1>Tarô Divino Siriano</h1>
            <p class="subtitulo">A Jornada da Alma</p>
            
            <div class="formulario">
                <div class="campo-input">
                    <label class="label-luz">Quem busca a Luz?</label>
                    <input type="text" id="nome-consulente" placeholder="Nome do Consulente">
                </div>
                <div class="campo-input">
                    <label class="label-luz">Qual a sua intenção ou pergunta ao Criamor?</label>
                    <textarea id="pergunta-consulente" placeholder="Abra seu coração..."></textarea>
                </div>
                <button class="btn-luz" onclick="realizarJornada()">Revelar Destino e Canalizar</button>
            </div>
        </div>
    </section>

    <section id="tela-resultado" class="tela-pdf" style="max-width: 800px; margin: 40px auto; padding: 20px;">
        <div class="pagina-pdf">
            <h2 style="color: #b8860b; border-bottom: 1px solid #ccc; padding-bottom: 10px;">As Cartas Reveladas</h2>
            <div id="pdf-area-cartas" style="margin-top: 30px;"></div>
        </div>

        <div class="pagina-pdf">
            <h2 style="color: #b8860b; border-bottom: 1px solid #ccc; padding-bottom: 10px;">A Bênção da Essência</h2>
            <div id="pdf-area-essencia" style="margin-top: 30px;"></div>

            <hr style="border: 0; border-top: 2px solid #d4af37; margin: 40px 0;">

            <div style="margin-bottom: 30px;">
                <h3 style="color: #b8860b;">A Voz do Oráculo (Canalização Gemini)</h3>
                <div id="pdf-texto-ia" class="resultado-texto">As cartas aguardam sua intenção...</div>
            </div>
            
            <button onclick="window.print()" class="btn-luz">Imprimir/Salvar PDF</button>
            <button onclick="location.reload()" class="btn-luz" style="background: #444;">Nova Consulta</button>
        </div>
    </section>

    <script>
        // --- CONFIGURAÇÃO DO CRIAMOR ---
        const API_KEY = "SUA_API_KEY_AQUI"; // COLE SUA CHAVE AQUI

        const ARCANOS_CELESTES = [
            "O Sopro do Início", "A Aliança Siriana", "O Templo de Cristal", "A Estrela Guia", 
            "O Guardião do Portal", "A Chama Trina", "O Salto Quântico", "A Ordem de Melquisedeque",
            "O Conselho dos Anciãos", "A Nave Mãe", "O Despertar do DNA", "A Frequência do Amor"
        ];

        const ESSENCIAS_SIRIANAS = [
            "Saphira (Azul Cobalto)", "Ametist (Transmutação)", "Elarion (Cura Estelar)", 
            "Solaris (Vigor Vital)", "Lyra (Harmonia)", "Antares (Coragem)", "Sirian (Consciência)"
        ];

        async function realizarJornada() {
            const nome = document.getElementById('nome-consulente').value;
            const pergunta = document.getElementById('pergunta-consulente').value;
            const outputCartas = document.getElementById('pdf-area-cartas');
            const outputEssencia = document.getElementById('pdf-area-essencia');
            const outputIA = document.getElementById('pdf-texto-ia');

            if (!nome) { alert("Por favor, informe seu nome."); return; }

            // 1. Sorteio Aleatório
            const arcano = ARCANOS_CELESTES[Math.floor(Math.random() * ARCANOS_CELESTES.length)];
            const essencia = ESSENCIAS_SIRIANAS[Math.floor(Math.random() * ESSENCIAS_SIRIANAS.length)];

            // 2. Exibição Visual Imediata
            outputCartas.innerHTML = `<div class="carta-box"><strong>Arcano Celeste:</strong> ${arcano}</div>`;
            outputEssencia.innerHTML = `<div class="carta-box"><strong>Essência:</strong> ${essencia}</div>`;
            outputIA.innerHTML = `<span class="carregando">Sintonizando com a Egrégora Siriana... Canalizando mensagem do Criamor.</span>`;
            
            // Rolar para o resultado
            document.getElementById('tela-resultado').scrollIntoView({ behavior: 'smooth' });

            // 3. Chamada ao Gemini
            const promptSistema = `Você é o Oráculo do Portal El’Luminar. 
            Sua voz é a dos Mentores Sirianos. Seja amoroso, carinhoso, muito educado e fale sempre a verdade.
            Use o termo "Criamor" em vez de Criador. 
            Responda de forma espiritualizada e direta, sem rodeios.
            Consulente: ${nome}. Pergunta: ${pergunta}. 
            Cartas Sorteadas: ${arcano} e a Essência ${essencia}.
            Realize uma leitura profunda e motivacional baseada nessas energias.`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: promptSistema }] }]
                    })
                });

                const data = await response.json();
                const mensagem = data.candidates[0].content.parts[0].text;
                outputIA.innerText = mensagem;

            } catch (error) {
                outputIA.innerText = "Houve uma interferência na rede estelar. Verifique sua conexão ou a chave API.";
                console.error(error);
            }
        }
    </script>
</body>
</html>