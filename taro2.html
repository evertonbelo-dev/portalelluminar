<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tar√¥ Divino Siriano - A Jornada</title>   
    <link rel="icon" href="data:,"> 
    <link rel="stylesheet" href="css/portal.css?v=1.3.0"> 
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
</head>
<body>

    <a href="index.html" class="link-voltar-home">
        ‚Üê Voltar ao Portal
    </a>

    <section id="tela-conexao" class="tela ativa">
        <div class="conteudo-central">
            <div class="simbolo-portal">
                <img src="assets/PortalElluminar/Simbolo_Portal.png" alt="S√≠mbolo" style="width: 80px;">
            </div>
            <h1>Tar√¥ Divino Siriano</h1>
            <p class="subtitulo">A Jornada da Alma</p>
            <div class="formulario">
                <div class="campo-input">
                    <label class="label-luz">Quem busca a Luz?</label>
                    <input type="text" id="nome-consulente" placeholder="Nome do Consulente">
                </div>
                <div class="campo-input">
                    <label class="label-luz">Data de Nascimento</label>
                    <input type="date" id="data-nascimento">
                </div>
                <div class="campo-input">
                    <label class="label-luz">Guardi√£o da Sess√£o</label>
                    <input type="text" id="nome-tarologo" value="Aurelian Seth">
                </div>
                <button onclick="iniciarJornada()" class="btn-luz">Iniciar Conex√£o</button>
            </div>
        </div>
    </section>

    <section id="tela-sintonia" class="tela">
        <div class="conteudo-central">
            <div class="loader-egregora">
                <div style="font-size: 3rem; color: var(--ouro-solar);">‚ú°</div>
            </div>
            <h2 id="msg-sintonia" class="texto-sintonia">Consultando a Egr√©gora...</h2>
        </div>
    </section>

    <section id="tela-meditacao" class="tela">
        <div class="conteudo-central">
            <h2>Portal de Acesso</h2>
            <div class="texto-meditacao-box">
                <p class="texto-sagrado">
                    "Sabbah, Le√£o de Ouro, protege este caminho com tua lan√ßa de luz.<br>
                    Ruge em mim tua coragem, sela minha alma com tua fidelidade.<br>
                    Estamos sob a prote√ß√£o do Criamor."
                </p>
            </div>
            <button onclick="irParaMesa()" class="btn-luz">Estou Pronto</button>
        </div>
    </section>

    <main id="tela-mesa" class="tela mesa-jogo">
        <div class="mesa-header">
            <h3 id="nome-display" style="color: var(--ouro-solar); font-family: 'Cinzel';">Consulente</h3>
            <button onclick="location.reload()" class="btn-pequeno" style="background:none; border:1px solid #666; color:#fff; padding:5px 10px; cursor:pointer;">‚Üê Sair</button>
        </div>
        <section id="selecao-leitura" class="selecao-container">
            <h2 style="color: var(--dourado-antigo); font-family: 'Cinzel'; margin-bottom: 30px; text-align: center;">Escolha sua Leitura</h2>
            <div class="opcoes-grid">
                <div class="card-opcao-visual bg-unica" onclick="prepararTiragem('unica', this)">
                    <div class="card-overlay">
                        <div class="icon-opcao">‚òùÔ∏è</div>
                        <h3>Conselho da Chama</h3>
                        <p>1 Carta. Resposta direta.</p>
                    </div>
                </div>
                <div class="card-opcao-visual bg-triade" onclick="prepararTiragem('triade', this)">
                    <div class="card-overlay">
                        <div class="icon-opcao">‚ú®</div>
                        <h3>Templo do Tempo</h3>
                        <p>3 Cartas: Passado, Presente, Futuro.</p>
                    </div>
                </div>
                <div class="card-opcao-visual bg-cruz" onclick="prepararTiragem('cruz', this)">
                    <div class="card-overlay">
                        <div class="icon-opcao">‚úùÔ∏è</div>
                        <h3>Cruz Estelar</h3>
                        <p>5 Cartas: Dire√ß√£o Plena e Destino.</p>
                    </div>
                </div>
            </div>
        </section>
        <section id="area-pergunta" class="container-pergunta oculto">
            <div class="icone-foco">üëÅÔ∏è</div>
            <h2>Concentre sua Energia</h2>
            <p style="margin-bottom: 20px; color: #ccc;">Respire fundo. Digite abaixo o que seu cora√ß√£o busca saber.</p>
            <textarea id="pergunta-consulente" class="input-pergunta" placeholder="Ex: Qual o pr√≥ximo passo na minha miss√£o?"></textarea>
            <button onclick="realizarLeitura()" class="btn-luz grande">Selar Inten√ß√£o e Abrir Baralho</button>
        </section>
    </main>

    <section id="tela-leitura" class="tela">
        <div class="conteudo-central" style="justify-content: flex-start;">
            <button onclick="novaPergunta()" style="background:none; border:none; color:#aaa; cursor:pointer; margin-bottom: 20px;">‚Üê Voltar para Pergunta</button>
            <div id="mesa-cartas-resultado" class="mesa-cartas-grid"></div>
            <div id="texto-interpretacao" style="width: 100%; max-width: 800px; margin-top: 30px;"></div>
            <div style="text-align: center; margin-top: 40px;">
                <button onclick="finalizarComEssencia()" class="btn-luz">Receber B√™n√ß√£o da Ess√™ncia ‚ú®</button>
            </div>
        </div>
    </section>

    <section id="tela-essencia" class="tela">
        <div class="conteudo-central">
            <h2 style="color: var(--dourado-antigo); margin-bottom: 20px; font-family: 'Cinzel';">A B√™n√ß√£o Final</h2>
            <div id="carta-essencia-display" style="margin-bottom: 20px;"></div>
            <div id="msg-essencia" style="max-width: 750px; text-align: center; font-style: italic; color: #e0e0e0; margin: 0 auto;"></div>
            
            <hr style="margin: 40px 0; width: 100%; border: 0; border-top: 1px solid rgba(212,175,55,0.3);">
            
            <div class="container-vozes-unificadas">
                <div class="painel-integracao-v2">
                    <h3 style="color: var(--ouro-solar); font-family: 'Cinzel'; margin-bottom: 15px;">ü§ñ Or√°culo Digital (IA)</h3>
                    <textarea id="retorno-ia" class="area-texto-sagrada textarea-essencia" placeholder="Sintonizando a voz do Criamor..." rows="5"></textarea>
                </div>

                <div class="painel-integracao-v2">
                    <h3 style="color: var(--ouro-solar); font-family: 'Cinzel'; margin-bottom: 15px;">ü¶Å Canaliza√ß√£o do Guardi√£o</h3>
                    <textarea id="notas-tarologo" class="area-texto-sagrada textarea-essencia" placeholder="Sua percep√ß√£o espiritual aqui..." rows="5"></textarea>
                </div>
            </div>

            <div style="margin-top: 40px; padding-bottom: 100px;">
                <button onclick="gerarPDFReal()" class="btn-luz">üìÑ Baixar PDF Sagrado</button>
                <br><br>
                <button onclick="location.reload()" style="background:none; border:none; color:#aaa; cursor:pointer;">Iniciar Nova Sess√£o</button>
            </div>
        </div>
    </section>

    <footer class="portal-footer">
        <span class="footer-versao">v1.3.0</span>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getVertexAI, getGenerativeModel } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-vertexai.js";
        import { firebaseConfig } from './js/config.js?v=1.3.0';

        try {
            const app = initializeApp(firebaseConfig);
            const vertexAI = getVertexAI(app);
            window.modeloGemini = getGenerativeModel(vertexAI, { model: "gemini-2.5-flash" });
            console.log("Criamor: Or√°culo Digital sintonizado na frequ√™ncia 2.5 Flash.");
        } catch (e) { console.error("Erro na sintoniza√ß√£o:", e); }
    </script>

    <script src="js/dados.js?v=1.3.0"></script>
    <script src="js/app.js?v=1.3.0"></script>

    <div id="container-pdf-oculto">
        <div class="capa-pdf">
            <div class="conteudo-capa">
                <img src="assets/PortalElluminar/Simbolo_Portal.png" alt="S√≠mbolo" class="logo-capa">
                <h1 class="titulo-capa">Tar√¥ Divino Siriano</h1>
                <p class="subtitulo-capa">A Jornada do Sabbah</p>
                <div class="dados-capa">
                    <p><strong>Consulente:</strong> <span id="pdf-nome-consulente"></span></p>
                    <p><strong>Nascimento:</strong> <span id="pdf-nasc-consulente"></span></p>
                    <p><strong>Quest√£o:</strong> <span id="pdf-pergunta" style="font-style: italic;"></span></p>
                    <p><strong>Data da Leitura:</strong> <span id="pdf-data-leitura"></span></p>
                    <p><strong>Guardi√£o da Sess√£o:</strong> <span id="pdf-tarologo"></span></p>
                </div>
                <div class="footer-capa">
                    <p>"Que a Luz de Sirius guie teus passos."</p>
                </div>
            </div>
        </div>
        <div class="pagina-pdf">
            <h2 style="color: #b8860b; border-bottom: 1px solid #ccc; padding-bottom: 10px;">As Cartas Reveladas</h2>
            <div id="pdf-area-cartas" style="margin-top: 30px;"></div>
        </div>
        <div class="pagina-pdf">
            <h2 style="color: #b8860b; border-bottom: 1px solid #ccc; padding-bottom: 10px;">A B√™n√ß√£o da Ess√™ncia</h2>
            <div id="pdf-area-essencia" style="margin-top: 30px;"></div>
            <hr style="border: 0; border-top: 2px solid #d4af37; margin: 40px 0;">
            <div style="margin-bottom: 30px;">
                <h3 style="color: #b8860b;">A Voz do Or√°culo</h3>
                <div id="pdf-texto-ia" style="white-space: pre-wrap; line-height: 1.6;"></div>
            </div>
            <div>
                <h3 style="color: #b8860b;">Notas do Guardi√£o</h3>
                <div id="pdf-texto-tarologo" style="font-style: italic; color: #444; white-space: pre-wrap;"></div>
            </div>
            <div class="assinatura-box">
                <div class="linha-assinatura"></div>
                <div class="texto-assinatura">Aurelian Seth</div>
                <div style="font-size: 0.9rem; color: #666;">Guardi√£o da Sess√£o</div>
            </div>
        </div>
    </div>
</body>
</html>